{"version":3,"file":"click-outside.js","sources":["../../src/modifiers/click-outside.js"],"sourcesContent":["const HAS_WINDOWS = typeof window !== 'undefined';\nconst HAS_NAVIGATOR = typeof navigator !== 'undefined';\nconst IS_TOUCH =\n  HAS_WINDOWS &&\n  ('ontouchstart' in window ||\n    (HAS_NAVIGATOR && navigator.msMaxTouchPoints > 0));\nconst EVENTS = IS_TOUCH ? ['touchstart'] : ['click'];\n\nimport { modifier } from 'ember-modifier';\n\nfunction getEventNames({ event, events }) {\n  if (events) {\n    return events;\n  }\n\n  if (event) {\n    return [event];\n  }\n\n  return EVENTS;\n}\n\nexport default modifier(\n  function clickOutside(\n    element,\n    [handlerValue, useCapture] = [undefined, false],\n    hashParams = {},\n  ) {\n    const refEvent = new Event('clickReference');\n    const events = getEventNames(hashParams);\n    const isFunction = typeof handlerValue === 'function';\n    if (!isFunction) {\n      throw new Error('{{click-outside}}: Handler value must be a function.');\n    }\n    const handlers = [];\n    events.forEach((eventName) => {\n      const handler = (event) => {\n        if (refEvent.timeStamp > event.timeStamp) {\n          return;\n        }\n        const isClickOutside =\n          event.target !== element && !element.contains(event.target);\n        if (!isClickOutside) {\n          return;\n        }\n        handlerValue(event);\n      };\n      handlers.push([eventName, handler]);\n      document.documentElement.addEventListener(eventName, handler, useCapture);\n    });\n    return () => {\n      handlers.forEach(([eventName, handler]) => {\n        document.documentElement.removeEventListener(\n          eventName,\n          handler,\n          useCapture,\n        );\n      });\n    };\n  },\n  { eager: false },\n);\n"],"names":["HAS_WINDOWS","window","HAS_NAVIGATOR","navigator","IS_TOUCH","msMaxTouchPoints","EVENTS","getEventNames","event","events","modifier","clickOutside","element","handlerValue","useCapture","undefined","hashParams","refEvent","Event","isFunction","Error","handlers","forEach","eventName","handler","timeStamp","isClickOutside","target","contains","push","document","documentElement","addEventListener","removeEventListener","eager"],"mappings":";;AAAA,MAAMA,WAAW,GAAG,OAAOC,MAAM,KAAK,WAAW;AACjD,MAAMC,aAAa,GAAG,OAAOC,SAAS,KAAK,WAAW;AACtD,MAAMC,QAAQ,GACZJ,WAAW,KACV,cAAc,IAAIC,MAAM,IACtBC,aAAa,IAAIC,SAAS,CAACE,gBAAgB,GAAG,CAAE,CAAC;AACtD,MAAMC,MAAM,GAAGF,QAAQ,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,OAAO,CAAC;AAIpD,SAASG,aAAaA,CAAC;EAAEC,KAAK;AAAEC,EAAAA;AAAO,CAAC,EAAE;AACxC,EAAA,IAAIA,MAAM,EAAE;AACV,IAAA,OAAOA,MAAM;AACf;AAEA,EAAA,IAAID,KAAK,EAAE;IACT,OAAO,CAACA,KAAK,CAAC;AAChB;AAEA,EAAA,OAAOF,MAAM;AACf;AAEA,mBAAeI,QAAQ,CACrB,SAASC,YAAYA,CACnBC,OAAO,EACP,CAACC,YAAY,EAAEC,UAAU,CAAC,GAAG,CAACC,SAAS,EAAE,KAAK,CAAC,EAC/CC,UAAU,GAAG,EAAE,EACf;AACA,EAAA,MAAMC,QAAQ,GAAG,IAAIC,KAAK,CAAC,gBAAgB,CAAC;AAC5C,EAAA,MAAMT,MAAM,GAAGF,aAAa,CAACS,UAAU,CAAC;AACxC,EAAA,MAAMG,UAAU,GAAG,OAAON,YAAY,KAAK,UAAU;EACrD,IAAI,CAACM,UAAU,EAAE;AACf,IAAA,MAAM,IAAIC,KAAK,CAAC,sDAAsD,CAAC;AACzE;EACA,MAAMC,QAAQ,GAAG,EAAE;AACnBZ,EAAAA,MAAM,CAACa,OAAO,CAAEC,SAAS,IAAK;IAC5B,MAAMC,OAAO,GAAIhB,KAAK,IAAK;AACzB,MAAA,IAAIS,QAAQ,CAACQ,SAAS,GAAGjB,KAAK,CAACiB,SAAS,EAAE;AACxC,QAAA;AACF;AACA,MAAA,MAAMC,cAAc,GAClBlB,KAAK,CAACmB,MAAM,KAAKf,OAAO,IAAI,CAACA,OAAO,CAACgB,QAAQ,CAACpB,KAAK,CAACmB,MAAM,CAAC;MAC7D,IAAI,CAACD,cAAc,EAAE;AACnB,QAAA;AACF;MACAb,YAAY,CAACL,KAAK,CAAC;KACpB;IACDa,QAAQ,CAACQ,IAAI,CAAC,CAACN,SAAS,EAAEC,OAAO,CAAC,CAAC;IACnCM,QAAQ,CAACC,eAAe,CAACC,gBAAgB,CAACT,SAAS,EAAEC,OAAO,EAAEV,UAAU,CAAC;AAC3E,GAAC,CAAC;AACF,EAAA,OAAO,MAAM;IACXO,QAAQ,CAACC,OAAO,CAAC,CAAC,CAACC,SAAS,EAAEC,OAAO,CAAC,KAAK;MACzCM,QAAQ,CAACC,eAAe,CAACE,mBAAmB,CAC1CV,SAAS,EACTC,OAAO,EACPV,UACF,CAAC;AACH,KAAC,CAAC;GACH;AACH,CAAC,EACD;AAAEoB,EAAAA,KAAK,EAAE;AAAM,CACjB,CAAC;;;;"}